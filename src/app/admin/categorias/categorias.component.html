<!-- <h1>Categorias</h1>

<div class="container">
    <div class="row">
        <div class="col">

            <h1>Agregar Nueva</h1>
            <form class="add" [formGroup]="categoriaForm" (ngSubmit)="add()">
                <label for="id">ID</label>
                <input type="text" name="id" class="text-white bg-dark" [(ngModel)]="categoria.id" formControlName="id" [ngClass]="submitted && categoriaForm.controls['id'].errors ? 'is-invalid' : !submitted && categoriaForm.controls['id'].valid ? 'is-valid' : submitted && categoriaForm.controls['id'].valid ? 'is-valid' : null"> -->
<!-- <div *ngIf="submitted && categoriaForm.controls['titulo'].errors" class="text-danger">
        <div *ngIf="categoriaForm.controls['titulo'].errors.required">El titulo es requerido</div>
    </div> -->
<!-- <label for="nombre">Nombre</label>
                <input type="text" name="nombre" class="text-white bg-dark" required [(ngModel)]="categoria.nombre" formControlName="nombre" required />
                <button type="button" class="btn btn-primary" type="submit">Agregar</button>
            </form>
            <br>
            <br> -->

<!-- <h1>Lista de Categorias</h1>
            <div class="show">
                <ng-container *ngFor="let categoria of categoriaCollectiondata">
                    <div>
                        <label for="nombre-show">ID:</label>
                        <input type="text" class="text-white bg-dark col-2" name="id-show" [value]="categoria.id"  required #id>
                        <label for="nombre-show">Nombre:</label>
                        <input type="text" class="text-white bg-dark col-7" name="nombre-show"
                            [value]="categoria.nombre" required #nombre>
                        <button type="button" class="btn btn-danger" (click)="delete(categoria.id)">Eliminar</button>
                        <button type="button" class="btn btn-warning"
                            (click)="update(categoria.id, nombre)">Actualizar</button>
                    </div>
                 
                </ng-container>
            </div> -->
<!-- <hr>
            <p-table #tableCategorias [value]="categoria" selectionMode="single" [(selection)]="selectedCategoria" dataKey="nombre" [loading]="loading" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" responsiveLayout="scroll" currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} categorias"
                [rowsPerPageOptions]="[10,25,50]" styleClass="p-datatable-striped" [globalFilterFields]="['nombre','categoria.nombre']">
                <ng-template pTemplate="caption">
                    <div class="flex">
                        <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash" (click)="clear(tableCategorias)"></button> &nbsp; &nbsp;
                        <span class="p-input-icon-left ml-auto" style="width: 89%;">
                          <i class="pi pi-search"></i>
                          <input pInputText type="text" (input)="tableCategorias.filterGlobal($event.target.value, 'contains')" placeholder="Buscar categoria" [style]="{ width: '100%' }"/>
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Categoria</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-categoria>
                    <tr [pSelectableRowDblClick]="categoria">
                        <td>
                            <div data-bs-toggle="tooltip" data-bs-placement="top" title="Doble click para agregar una nominación con ésta categoria">
                                {{categoria.nombre}}
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>




    </div>
</div> -->




<div class="container">
    <p-toolbar>
        <ng-template pTemplate="left">
            <h3 class="text-dark">Categorias</h3>
        </ng-template>
        <ng-template pTemplate="right">
            <button pButton pRipple class="p-button-info mr-2" (click)="Excel()" label="Exportar Excel" icon="pi pi-upload"> </button>
            <button pButton pRipple class="p-button-info mr-2" label="Nueva convocatoria" (click)="openNew()" icon="pi pi-plus"> </button>
        </ng-template>
        <ng-template pTemplate="caption">
            <div class="flex">
                <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash" (click)="clear(tableCategorias)"></button> &nbsp; &nbsp;
                <span class="p-input-icon-left ml-auto" style="width: 89%;">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="tableCategorias.filterGlobal($event.target.value, 'contains')" placeholder="Buscar categoria" [style]="{ width: '100%' }"/>
                </span>
            </div>
        </ng-template>
    </p-toolbar>
    <p-table #tableCategorias [value]="categorias" [paginator]="true" [rows]="10" [(selection)]="selectedCategoria" dataKey="nombre" [loading]="loading" currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} categorias">


        <ng-template pTemplate="header">
            <tr>
                <th>
                    Categoria
                    <!-- <p-sortIcon field="id"></p-sortIcon> -->
                </th>
                <th>
                    Acciones
                </th>

            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-categoria>
            <tr>
                <!-- <td>{{categoria.id}}</td> -->
                <td>{{categoria.nombre}}</td>
                <td>
                    <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="delete(categoria.id)"></button>
                    <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2" (click)="editar(categoria)" (click)="visible"></button>
                </td>
            </tr>

        </ng-template>
    </p-table>
</div>


<p-dialog [(visible)]="visible" [style]="{width: '450px'}" header="Detalles del mensaje" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">

        <form [formGroup]="categoriaForm">

            <div class="field">
                <label for="titulo">Titulo:</label>
                <input type="text" pInputText [(ngModel)]="categorias.id" formControlName="id">

            </div>
            <div class="field">
                <label for="nombre">Fecha de Inicio:</label>
                <input type="text" name="nombre" class="" pInputText required [(ngModel)]="categorias.nombre" formControlName="nombre" required/>
                <small class="p-error" *ngIf="submitted && !categorias.nombre">nombre is required.</small>

            </div>



        </form>



    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="add()"></button>
    </ng-template>
</p-dialog>